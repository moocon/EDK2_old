<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<style type="text/css">
  <!--
  .main-title, .main-details {
    font-size: small;
  }
  
  .main-details {
    margin-top: 0.19in;
    margin-bottom: 0.19in
  }
  
  .main-title {
    font-weight: bold;
    margin-top: 0in;
    margin-bottom: 0.08in;
    border-bottom: thin solid black;
  }

  .build-step-title {
    font-weight: bold;
    margin-top: 0.19in;
    margin-bottom: 0.19in
  }
  
  .build-step-details {
  }

  .monospace, .build-step-code {
    font-family: "courier new", "courier", "monospace";
  }

  .build-step-code {
    border: 1px dashed;
    margin-right: 0.25in;
    padding: 2pt 4pt 2pt 4pt;
    background-color: #F0F0F0;
  }
  
  .build-step-details, .build-step-code, .build-step-title {
    font-size: small;
    margin-left: 0.25in;
  }
  
  table.build-step-details td {
    border: hidden;
  }

  img.in-text {
    vertical-align: top;
  }
  -->
</style>

<h2 class="main-title">
  How to run <a href="OVMF.html">OVMF</a> with
  <a href="http://www.nongnu.org/qemu">QEMU</a>
</h2>

<p class="main-details">
  In order to run <a href="OVMF.html">OVMF</a>
  with <a href="http://www.nongnu.org/qemu">QEMU</a>,
  you must have QEMU version 0.9.1 or
  newer installed on your system.
</p>

<h2 class="main-title">
  Get a build of OVMF.fd
</h2>

<p class="main-details">
  Pre-built binaries of OVMF are available from
  <a href="https://edk2.tianocore.org">https://edk2.tianocore.org</a>
  under the 'Document &amp; files' area.&nbsp;
  You can also <a href="build-ovmf.html">build OVMF</a> if you are
  interested.
</p>

<h2 class="main-title">
  Choosing the correct processor architecture.
</h2>

<p class="main-details">
  Be sure to align the processor architecture for OVMF with the proper
  processor archtecture of QEMU.
</p>

<p class="main-details">
  For the IA32 build of OVMF, there is a little more choice, since the
  X64 processor is also compatible with IA32.&nsbp;
  Therefore, with the IA32 build of OVMF, you can use the following
  commands: qemu, qemu-system-i386 or qemu-system-x86_64.
</p>

<p class="main-details">
  For the X64 build of OVMF, however, you can only use the
  qemu-system-x86_64 command.
</p>

<h2 class="main-title">
  Setup a BIOS directory for OVMF QEMU
</h2>

<p class="main-details">
  To use OVMF with QEMU, we utilize the
  <font class="monospace"><b>-L</b></font>
  QEMU command line parameter.&nbsp;
  This paramter takes a directory path, and QEMU will load the bios.bin
  from this directory.&nbsp;
</p>

<p class="main-details">
  Create a directory, and cd to the directory.  For example:
</p>

<pre class="build-step-code">
bash$ <b>mkdir ~/run-ovmf</b>
bash$ <b>cd ~/run-ovmf</b>
</pre>

<p class="main-details">
  Next, copy the OVMF.fd file into this directory,
  but rename OVMF.fd to bios.bin:
</p>

<pre class="build-step-code">
bash$ <b>cp /path/to/ovmf/OVMF.fd bios.bin</b>
</pre>

<p class="main-details">
  Next, create a hard disk image (QEMU requires at least one disk
  image when it is run):
</p>

<pre class="build-step-code">
bash$ <b>qemu-img create -f qcow2 hda.img 20M</b>
</pre>

<h2 class="main-title">
  Run OVMF with QEMU
</h2>

<p class="main-details">
  Now your should be able to run QEMU.  Here is a sample command:
</p>

<pre class="build-step-code">
bash$ <b>qemu-system-x86_64 -L . -hda hda.img</b>
</pre>

<p class="main-details">
  If everything goes well, you should see a graphic logo, and then the
  UEFI shell should start.
</p>

<p class="main-details">
  If you see the following error,
</p>

<pre class="build-step-code">
qemu: could not load VGA BIOS './vgabios-cirrus.bin'
</pre>

<p class="main-details">
  then copy the vgabios-cirrus.bin file from QEMU into your OVMF bios.bin
  directory. (~/run-ovmf in the above example)&nbsp;
  Although QEMU may complaign if this file is not found, it will not
  be used by the OVMF firmware.
</p>

