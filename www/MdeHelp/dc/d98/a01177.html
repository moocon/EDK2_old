<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MdePkg[ALL]: MdePkg/Include/Protocol/Ebc.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MdePkg/Include/Protocol/Ebc.h File Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/a00028.html">_EFI_EBC_PROTOCOL</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d98/a01177.html#812b64a6194b55759a3cee1e7a11fac7">EFI_EBC_INTERPRETER_PROTOCOL_GUID</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d98/a01177.html#61056b9b18870a4aa4aa85aaeaf2f7e3">EFI_EBC_PROTOCOL_GUID</a>&nbsp;&nbsp;&nbsp;EFI_EBC_INTERPRETER_PROTOCOL_GUID</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef struct <a class="el" href="../../dc/d3c/a00028.html">_EFI_EBC_PROTOCOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d98/a01177.html#9f36c03518dd14459f3048f955956848">EFI_EBC_PROTOCOL</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../dd/d95/a01247.html#5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(EFIAPI *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d98/a01177.html#3332c048dc1d524c0a912b1bc91dbe6b">EFI_EBC_CREATE_THUNK</a> )(IN <a class="el" href="../../dc/d3c/a00028.html">EFI_EBC_PROTOCOL</a> *This, IN <a class="el" href="../../dd/d95/a01247.html#f943d518ce8a229e7e51ce3fed0e3122">EFI_HANDLE</a> ImageHandle, IN VOID *EbcEntryPoint, OUT VOID **Thunk)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../dd/d95/a01247.html#5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(EFIAPI *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d98/a01177.html#eb5035844037fe69dd3a3121ceffdeb3">EFI_EBC_UNLOAD_IMAGE</a> )(IN <a class="el" href="../../dc/d3c/a00028.html">EFI_EBC_PROTOCOL</a> *This, IN <a class="el" href="../../dd/d95/a01247.html#f943d518ce8a229e7e51ce3fed0e3122">EFI_HANDLE</a> ImageHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../dd/d95/a01247.html#5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(EFIAPI *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d98/a01177.html#0d936c34e18c834e015808ce9a8f0236">EBC_ICACHE_FLUSH</a> )(IN <a class="el" href="../../dd/d95/a01247.html#31bc7e7faeab8d2940ee34f21d41cd04">EFI_PHYSICAL_ADDRESS</a> Start, IN <a class="el" href="../../d0/d90/a01059.html#95df6cdb32afc350ff070f2fe8a54a67">UINT64</a> Length)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../dd/d95/a01247.html#5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(EFIAPI *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d98/a01177.html#29f85a562e68717552ac210ec78c1bef">EFI_EBC_REGISTER_ICACHE_FLUSH</a> )(IN <a class="el" href="../../dc/d3c/a00028.html">EFI_EBC_PROTOCOL</a> *This, IN <a class="el" href="../../dc/d98/a01177.html#0d936c34e18c834e015808ce9a8f0236">EBC_ICACHE_FLUSH</a> Flush)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../dd/d95/a01247.html#5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(EFIAPI *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d98/a01177.html#92d7f4bc144f92479554df8a2e59127f">EFI_EBC_GET_VERSION</a> )(IN <a class="el" href="../../dc/d3c/a00028.html">EFI_EBC_PROTOCOL</a> *This, IN OUT <a class="el" href="../../d0/d90/a01059.html#95df6cdb32afc350ff070f2fe8a54a67">UINT64</a> *Version)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/d87/a00689.html">EFI_GUID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d98/a01177.html#3718c2be08683c9a1b93706fec8832dd">gEfiEbcProtocolGuid</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Describes the protocol interface to the EBC interpreter.<p>
Copyright (c) 2006 - 2008, Intel Corporation All rights reserved. This program and the accompanying materials are licensed and made available under the terms and conditions of the BSD License which accompanies this distribution. The full text of the license may be found at <a href="http://opensource.org/licenses/bsd-license.php">http://opensource.org/licenses/bsd-license.php</a><p>
THE PROGRAM IS DISTRIBUTED UNDER THE BSD LICENSE ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED. <hr><h2>Define Documentation</h2>
<a class="anchor" name="812b64a6194b55759a3cee1e7a11fac7"></a><!-- doxytag: member="Ebc.h::EFI_EBC_INTERPRETER_PROTOCOL_GUID" ref="812b64a6194b55759a3cee1e7a11fac7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EFI_EBC_INTERPRETER_PROTOCOL_GUID          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">{ \
    0x13AC6DD1, 0x73D0, 0x11D4, {0xB0, 0x6B, 0x00, 0xAA, 0x00, 0xBD, 0x6D, 0xE7 } \
  }
</pre></div>
</div>
</div><p>
<a class="anchor" name="61056b9b18870a4aa4aa85aaeaf2f7e3"></a><!-- doxytag: member="Ebc.h::EFI_EBC_PROTOCOL_GUID" ref="61056b9b18870a4aa4aa85aaeaf2f7e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EFI_EBC_PROTOCOL_GUID&nbsp;&nbsp;&nbsp;EFI_EBC_INTERPRETER_PROTOCOL_GUID          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Protocol Guid Name defined in spec. 
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="0d936c34e18c834e015808ce9a8f0236"></a><!-- doxytag: member="Ebc.h::EBC_ICACHE_FLUSH" ref="0d936c34e18c834e015808ce9a8f0236" args=")(IN EFI_PHYSICAL_ADDRESS Start, IN UINT64 Length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../dd/d95/a01247.html#5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(EFIAPI * <a class="el" href="../../dc/d98/a01177.html#0d936c34e18c834e015808ce9a8f0236">EBC_ICACHE_FLUSH</a>)(IN <a class="el" href="../../dd/d95/a01247.html#31bc7e7faeab8d2940ee34f21d41cd04">EFI_PHYSICAL_ADDRESS</a> Start, IN <a class="el" href="../../d0/d90/a01059.html#95df6cdb32afc350ff070f2fe8a54a67">UINT64</a> Length)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the prototype for the Flush callback routine. A pointer to a routine of this type is passed to the EBC EFI_EBC_REGISTER_ICACHE_FLUSH protocol service.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Start</em>&nbsp;</td><td>The beginning physical address to flush from the processor's instruction cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Length</em>&nbsp;</td><td>The number of bytes to flush from the processor's instruction cache.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>EFI_SUCCESS</em>&nbsp;</td><td>The function completed successfully. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="3332c048dc1d524c0a912b1bc91dbe6b"></a><!-- doxytag: member="Ebc.h::EFI_EBC_CREATE_THUNK" ref="3332c048dc1d524c0a912b1bc91dbe6b" args=")(IN EFI_EBC_PROTOCOL *This, IN EFI_HANDLE ImageHandle, IN VOID *EbcEntryPoint, OUT VOID **Thunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../dd/d95/a01247.html#5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(EFIAPI * <a class="el" href="../../dc/d98/a01177.html#3332c048dc1d524c0a912b1bc91dbe6b">EFI_EBC_CREATE_THUNK</a>)(IN <a class="el" href="../../dc/d3c/a00028.html">EFI_EBC_PROTOCOL</a> *This, IN <a class="el" href="../../dd/d95/a01247.html#f943d518ce8a229e7e51ce3fed0e3122">EFI_HANDLE</a> ImageHandle, IN VOID *EbcEntryPoint, OUT VOID **Thunk)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a thunk for an EBC entry point, returning the address of the thunk.<p>
A PE32+ EBC image, like any other PE32+ image, contains an optional header that specifies the entry point for image execution. However, for EBC images, this is the entry point of EBC instructions, so is not directly executable by the native processor. Therefore, when an EBC image is loaded, the loader must call this service to get a pointer to native code (thunk) that can be executed, which will invoke the interpreter to begin execution at the original EBC entry point.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>This</em>&nbsp;</td><td>A pointer to the EFI_EBC_PROTOCOL instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ImageHandle</em>&nbsp;</td><td>Handle of image for which the thunk is being created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>EbcEntryPoint</em>&nbsp;</td><td>Address of the actual EBC entry point or protocol service the thunk should call. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Thunk</em>&nbsp;</td><td>Returned pointer to a thunk created.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>EFI_SUCCESS</em>&nbsp;</td><td>The function completed successfully. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>EFI_INVALID_PARAMETER</em>&nbsp;</td><td>Image entry point is not 2-byte aligned. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>EFI_OUT_OF_RESOURCES</em>&nbsp;</td><td>Memory could not be allocated for the thunk. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="92d7f4bc144f92479554df8a2e59127f"></a><!-- doxytag: member="Ebc.h::EFI_EBC_GET_VERSION" ref="92d7f4bc144f92479554df8a2e59127f" args=")(IN EFI_EBC_PROTOCOL *This, IN OUT UINT64 *Version)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../dd/d95/a01247.html#5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(EFIAPI * <a class="el" href="../../dc/d98/a01177.html#92d7f4bc144f92479554df8a2e59127f">EFI_EBC_GET_VERSION</a>)(IN <a class="el" href="../../dc/d3c/a00028.html">EFI_EBC_PROTOCOL</a> *This, IN OUT <a class="el" href="../../d0/d90/a01059.html#95df6cdb32afc350ff070f2fe8a54a67">UINT64</a> *Version)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called to get the version of the interpreter.<p>
This function is called to get the version of the loaded EBC interpreter. The value and format of the returned version is identical to that returned by the EBC BREAK 1 instruction.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>This</em>&nbsp;</td><td>A pointer to the EFI_EBC_PROTOCOL instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Version</em>&nbsp;</td><td>Pointer to where to store the returned version of the interpreter.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>EFI_SUCCESS</em>&nbsp;</td><td>The function completed successfully. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>EFI_INVALID_PARAMETER</em>&nbsp;</td><td>Version pointer is NULL. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="9f36c03518dd14459f3048f955956848"></a><!-- doxytag: member="Ebc.h::EFI_EBC_PROTOCOL" ref="9f36c03518dd14459f3048f955956848" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../dc/d3c/a00028.html">_EFI_EBC_PROTOCOL</a> <a class="el" href="../../dc/d3c/a00028.html">EFI_EBC_PROTOCOL</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Define for forward reference. 
</div>
</div><p>
<a class="anchor" name="29f85a562e68717552ac210ec78c1bef"></a><!-- doxytag: member="Ebc.h::EFI_EBC_REGISTER_ICACHE_FLUSH" ref="29f85a562e68717552ac210ec78c1bef" args=")(IN EFI_EBC_PROTOCOL *This, IN EBC_ICACHE_FLUSH Flush)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../dd/d95/a01247.html#5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(EFIAPI * <a class="el" href="../../dc/d98/a01177.html#29f85a562e68717552ac210ec78c1bef">EFI_EBC_REGISTER_ICACHE_FLUSH</a>)(IN <a class="el" href="../../dc/d3c/a00028.html">EFI_EBC_PROTOCOL</a> *This, IN <a class="el" href="../../dc/d98/a01177.html#0d936c34e18c834e015808ce9a8f0236">EBC_ICACHE_FLUSH</a> Flush)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Registers a callback function that the EBC interpreter calls to flush the processor instruction cache following creation of thunks.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>This</em>&nbsp;</td><td>A pointer to the EFI_EBC_PROTOCOL instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Flush</em>&nbsp;</td><td>Pointer to a function of type EBC_ICACH_FLUSH.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>EFI_SUCCESS</em>&nbsp;</td><td>The function completed successfully. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="eb5035844037fe69dd3a3121ceffdeb3"></a><!-- doxytag: member="Ebc.h::EFI_EBC_UNLOAD_IMAGE" ref="eb5035844037fe69dd3a3121ceffdeb3" args=")(IN EFI_EBC_PROTOCOL *This, IN EFI_HANDLE ImageHandle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../dd/d95/a01247.html#5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(EFIAPI * <a class="el" href="../../dc/d98/a01177.html#eb5035844037fe69dd3a3121ceffdeb3">EFI_EBC_UNLOAD_IMAGE</a>)(IN <a class="el" href="../../dc/d3c/a00028.html">EFI_EBC_PROTOCOL</a> *This, IN <a class="el" href="../../dd/d95/a01247.html#f943d518ce8a229e7e51ce3fed0e3122">EFI_HANDLE</a> ImageHandle)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called prior to unloading an EBC image from memory.<p>
This function is called after an EBC image has exited, but before the image is actually unloaded. It is intended to provide the interpreter with the opportunity to perform any cleanup that may be necessary as a result of loading and executing the image.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>This</em>&nbsp;</td><td>A pointer to the EFI_EBC_PROTOCOL instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ImageHandle</em>&nbsp;</td><td>Image handle of the EBC image that is being unloaded from memory.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>EFI_SUCCESS</em>&nbsp;</td><td>The function completed successfully. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>EFI_INVALID_PARAMETER</em>&nbsp;</td><td>Image handle is not recognized as belonging to an EBC image that has been executed. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="3718c2be08683c9a1b93706fec8832dd"></a><!-- doxytag: member="Ebc.h::gEfiEbcProtocolGuid" ref="3718c2be08683c9a1b93706fec8832dd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d87/a00689.html">EFI_GUID</a> <a class="el" href="../../dc/d98/a01177.html#3718c2be08683c9a1b93706fec8832dd">gEfiEbcProtocolGuid</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 7 13:53:32 2009 for MdePkg[ALL] by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
